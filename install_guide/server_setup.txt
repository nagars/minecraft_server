/*
Use this for setting up the server
https://linuxconfig.org/how-to-setup-minecraft-server-on-ubuntu-18-04-bionic-beaver-linux

Use this for remote access
https://linuxize.com/post/how-to-install-minecraft-server-on-ubuntu-18-04/

Download the server here
https://www.minecraft.net/en-us/download/server

For backups
http://www.scaine.net/site/2013/08/backing-up-your-minecraft-server-in-ubuntu%EF%BB%BF%EF%BB%BF/

For Auto Updates
https://www.atpeaz.com/using-a-script-to-update-the-minecraft-server-jar/
*/

1, Install java and nmap

sudo apt-get update
sudo apt upgrade
sudo apt-get install openjdk-8-jdk
sudo apt install wget screen default-jdk nmap

2, Make a minecraft user without root priveleges (Safety convern)

sudo useradd -m -r -d /opt/minecraft minecraft

3, Make a directory, Install minecraft and give it permissions

sudo mkdir /opt/minecraft/survival

sudo chown -R minecraft /opt/minecraft

/*
Download the server and place it here
Run it using the command java -Xmx1024M -Xms1024M -jar (FILE_NAME).jar nogui

The command reserves 1Gb of memory for the server. Increase it if needbe.
nogui means no desktop console. use gui otherwise.

First time you run, it will fail. Access eula.txt and set eula to true:
vi eula.txt
*/

4, Create a script to run the server

sudo vi /etc/systemd/system/minecraft@.service 

/*copy the minecraft@.service file provided*/

/********************************/

/*
(-Xmx2G -Xms2G) reserves 2 Gb ram. Increase if needbe
*/

5, Start and check the server using script

sudo systemctl start minecraft@survival
sudo systemctl status minecraft@survival

/*
To stop use,
sudo systemctl stop minecraft@survival
*/

6, To ensure the server runs every boot

sudo systemctl enable minecraft@survival

7, Confirm running and port number

nmap -p 25565 localhost

/*
25565 is the default port

If you want to run multiple servers on the same IP address, you need to change the ports.
They must be different for each server.
Server ports can be changed in the server.properties files (server-ip is the variable).
*/

8, To make a new creative server

/*Repeat steps 3 and 5 through 7

eg. make a new directory called creative
copy the server file there
run it once
edit the eula.txt file
change ownership/permissions of folder
run the script ( sudo systemctl start minecraft@creative )
stop the server
edit the port number in server.properties
set the server to run on boot
start the server
confirm using new IP address 
*/

/*
To access different servers in minecraft running on the same IP address,
type the IPaddress then : and the port number.

eg. 192.168.0.70:25565 is default

port number can be set in the server.properties file
*/


/************FOR BACKUP*********/

1, Copy the backup.sh file to your server direcctories

2, In the directory for each server, type below to make the script executable

chmod +x backup.sh

 
/***********AUTO UPDATE***********/

1, Install the JSON parser jq

sudo apt-get install jq

2, Copy the update_server.sh file to your server directories

3, in the directory for each server, type below to make the script executable

chmod +x update_server.sh

/*****************************/
